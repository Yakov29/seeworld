"use strict";(self.webpackChunkseeworld=self.webpackChunkseeworld||[]).push([[871],{794:(e,s,t)=>{t.d(s,{A:()=>i});var a=t(579);const i=e=>{let{children:s}=e;return(0,a.jsx)("div",{className:"container",children:s})}},871:(e,s,t)=>{t.r(s),t.d(s,{default:()=>n});var a=t(43),i=t(794),r=t(579);const c=()=>{const[e,s]=(0,a.useState)([]),[t,c]=(0,a.useState)(!0);(0,a.useEffect)(()=>{(async()=>{const e=JSON.parse(localStorage.getItem("favorites"))||[];if(0===e.length)return s([]),void c(!1);try{const t=[...new Set(e.map(e=>e.announcementId))].map(e=>fetch("https://6882916c21fa24876a9b3c72.mockapi.io/announcement/".concat(e)).then(e=>e.json())),a=await Promise.all(t);s(a)}catch(t){console.error("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u043e\u0442\u0440\u0438\u043c\u0430\u043d\u043d\u0456 \u043e\u0431'\u044f\u0432:",t)}finally{c(!1)}})()},[]);return(0,r.jsx)("section",{className:"favorites",children:(0,r.jsx)(i.A,{children:t?(0,r.jsx)("p",{className:"favorites__loading",children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."}):0===e.length?(0,r.jsx)("p",{className:"favorites__empty",children:"\u0423 \u0432\u0430\u0441 \u043f\u043e\u043a\u0438 \u043d\u0435\u043c\u0430\u0454 \u043e\u0431'\u044f\u0432 \u0443 \u0432\u0438\u0431\u0440\u0430\u043d\u043e\u043c\u0443."}):(0,r.jsx)("ul",{className:"favorites__list",children:e.map(e=>(0,r.jsxs)("li",{className:"favorites__item",children:[(0,r.jsx)("img",{className:"favorites__image",src:e.image||"https://via.placeholder.com/300x200?text=No+Image",alt:e.description||"\u0411\u0435\u0437 \u043e\u043f\u0438\u0441\u0443"}),(0,r.jsxs)("div",{className:"favorites__info",children:[(0,r.jsxs)("div",{className:"favorites__info-item",children:[e.country,", ",e.city,", ",e.street]}),(0,r.jsxs)("div",{className:"favorites__info-item",children:["\u0422\u0438\u043f: ",e.type]})]}),(0,r.jsx)("button",{className:"favorites__remove",onClick:()=>(e=>{const t=(JSON.parse(localStorage.getItem("favorites"))||[]).filter(s=>s.announcementId!==e);localStorage.setItem("favorites",JSON.stringify(t)),s(s=>s.filter(s=>s.id!==e))})(e.id),children:"\u2715"})]},e.id))})})})},n=e=>{let{favorites:s}=e;return console.log(s),(0,r.jsx)("main",{children:(0,r.jsx)(c,{favorites:s})})}}}]);
//# sourceMappingURL=871.d1c3c474.chunk.js.map