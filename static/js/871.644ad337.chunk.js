"use strict";(self.webpackChunkseeworld=self.webpackChunkseeworld||[]).push([[871],{794:(e,s,t)=>{t.d(s,{A:()=>i});var a=t(579);const i=e=>{let{children:s}=e;return(0,a.jsx)("div",{className:"container",children:s})}},871:(e,s,t)=>{t.r(s),t.d(s,{default:()=>r});var a=t(43),i=t(794),c=t(579);const n=()=>{const[e,s]=(0,a.useState)([]),[t,n]=(0,a.useState)(!0);(0,a.useEffect)(()=>{(async()=>{const e=JSON.parse(localStorage.getItem("favorites"))||[];if(0===e.length)return s([]),void n(!1);try{const t=[...new Set(e.map(e=>e.announcementId))].map(e=>fetch("https://6882916c21fa24876a9b3c72.mockapi.io/announcement/".concat(e)).then(e=>e.json())),a=await Promise.all(t);s(a)}catch(t){}finally{n(!1)}})()},[]);return(0,c.jsx)("section",{className:"favorites",children:(0,c.jsx)(i.A,{children:t?(0,c.jsx)("p",{className:"favorites__loading",children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."}):0===e.length?(0,c.jsx)("p",{className:"favorites__empty",children:"\u0423 \u0432\u0430\u0441 \u043f\u043e\u043a\u0438 \u043d\u0435\u043c\u0430\u0454 \u043e\u0431'\u044f\u0432 \u0443 \u0432\u0438\u0431\u0440\u0430\u043d\u043e\u043c\u0443."}):(0,c.jsx)("ul",{className:"favorites__list",children:e.map(e=>(0,c.jsxs)("li",{className:"favorites__item",children:[(0,c.jsx)("img",{className:"favorites__image",src:e.image||"https://via.placeholder.com/300x200?text=No+Image",alt:"\u0417\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u043d\u044f \u0434\u043b\u044f \u043e\u0433\u043e\u043b\u043e\u0448\u0435\u043d\u043d\u044f \u0432 ".concat(e.country,", ").concat(e.city)}),(0,c.jsxs)("div",{className:"favorites__info",children:[(0,c.jsxs)("div",{className:"favorites__info-item",children:[e.country,", ",e.city,", ",e.street]}),(0,c.jsxs)("div",{className:"favorites__info-item",children:["\u0422\u0438\u043f: ",e.type]})]}),(0,c.jsx)("button",{className:"favorites__remove",onClick:()=>(e=>{const t=(JSON.parse(localStorage.getItem("favorites"))||[]).filter(s=>s.announcementId!==e);localStorage.setItem("favorites",JSON.stringify(t)),s(s=>s.filter(s=>s.id!==e))})(e.id),children:"\u2715"})]},e.id))})})})},r=e=>{let{favorites:s}=e;return(0,c.jsx)("main",{children:(0,c.jsx)(n,{favorites:s})})}}}]);
//# sourceMappingURL=871.644ad337.chunk.js.map